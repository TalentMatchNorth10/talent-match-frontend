import{a as b}from"./chunk-PRJ5RADF.js";import"./chunk-OSK3IQRY.js";import"./chunk-JIB744AJ.js";import"./chunk-CTU4KXEC.js";import"./chunk-U4SJQHLU.js";import"./chunk-BH567IKB.js";import"./chunk-OSI5MUBF.js";import"./chunk-YIJ7R3W2.js";import{d as D}from"./chunk-JTFASWY2.js";import"./chunk-S3DWSELF.js";import"./chunk-XWKWQVWO.js";import"./chunk-VCDWO5EX.js";import"./chunk-CEVRVF4S.js";import{p as I}from"./chunk-NZ6F5HKN.js";import"./chunk-VDFKJHPG.js";import"./chunk-22P3VKKG.js";import"./chunk-B6JNIWSP.js";import"./chunk-HZJNBNRE.js";import"./chunk-YB6BI2XV.js";import"./chunk-ZVABKVX7.js";import"./chunk-C7IGGWM4.js";import"./chunk-R5QHB6PJ.js";import"./chunk-TBL6Z3YL.js";import{u as F,w as y}from"./chunk-6355ZLB4.js";import{Ab as h,Ib as i,Jb as o,Kb as c,Lb as f,Oa as r,Qb as T,Xb as B,Zb as C,aa as s,eb as x,fa as A,lb as E,nc as g,o as p,ob as v,pb as _,qb as e,rb as t,zb as S}from"./chunk-Y52VWUQN.js";import"./chunk-MON7YFGF.js";var R=(a,l)=>l._id;function k(a,l){if(a&1&&(e(0,"tr",16)(1,"td",17),i(2),t(),e(3,"td",17),i(4),t(),e(5,"td",17),i(6),t(),e(7,"td",17),i(8),t(),e(9,"td",17),i(10),t(),e(11,"td",17),i(12),t(),e(13,"td",17),i(14),B(15,"number"),t()()),a&2){let n=l.$implicit;r(2),o(n.course_name),r(2),o(n.nick_name),r(2),f("",n.sn," / ",n.total,""),r(2),o(n.reserve_date),r(2),o(n.reserve_time),r(2),o(n.email),r(2),c(" ",C(15,8,n.price/n.total,"1.2-2")," ")}}function w(a,l){a&1&&(e(0,"tr")(1,"td",18),i(2,"\u672C\u6708\u5C1A\u672A\u6709\u5DF2\u5B8C\u6210\u8AB2\u7A0B"),t()())}function M(a,l){if(a&1&&(e(0,"tr")(1,"td",19),i(2,"\u7E3D\u8A08"),t(),e(3,"td",20),i(4),t()()),a&2){let n=h();r(4),c("$",n.total_income(),"")}}function $(a,l){if(a&1&&(e(0,"tr",16)(1,"td",17),i(2),t(),e(3,"td",17),i(4),t(),e(5,"td",17),i(6),t(),e(7,"td",17),i(8),t(),e(9,"td",17),i(10),t(),e(11,"td",17),i(12),t(),e(13,"td",17),i(14),B(15,"number"),t()()),a&2){let n=l.$implicit;r(2),o(n.course_name),r(2),o(n.nick_name),r(2),f("",n.sn," / ",n.total,""),r(2),o(n.reserve_date),r(2),o(n.reserve_time),r(2),o(n.email),r(2),c(" ",C(15,8,n.price/n.total,"1.2-2")," ")}}function j(a,l){a&1&&(e(0,"tr")(1,"td",18),i(2,"\u672C\u6708\u5C1A\u672A\u6709\u5F85\u5B8C\u6210\u8AB2\u7A0B"),t()())}function G(a,l){if(a&1&&(e(0,"tr")(1,"td",19),i(2,"\u7E3D\u8A08"),t(),e(3,"td",20),i(4),t()()),a&2){let n=h();r(4),c("$",n.expected_income(),"")}}var Q=(()=>{let l=class l{constructor(){this.teacherTransRecordService=s(I),this.dialogService=s(D),this.completed_reserves=b(this.teacherTransRecordService.apiTeacherTransRecordsCompletedMonthlyGet().pipe(p(m=>m.data?.completed_reserves??[]))),this.uncompleted_reserves=b(this.teacherTransRecordService.apiTeacherTransRecordsUncompletedMonthlyGet().pipe(p(m=>m.data?.uncompleted_reserves??[]))),this.total_income=g(()=>this.completed_reserves()?.reduce((m,d)=>m+d.price/d.total,0)),this.expected_income=g(()=>Math.round((this.uncompleted_reserves()?.reduce((m,d)=>m+d.price/d.total,0)??0)*100)/100)}openAccountDialog(){this.dialogService.openAccountDialog()}downloadHistory(){}};l.\u0275fac=function(d){return new(d||l)},l.\u0275cmp=A({type:l,selectors:[["app-teacher-record-page"]],standalone:!0,features:[T],decls:75,vars:4,consts:[[1,"mb-6","flex","items-center","justify-between"],[1,"text-3xl","font-bold","text-tmf-gray-1"],[1,"flex","items-center","gap-2"],[1,"text-sm","text-green-500"],[1,"rounded-full","border","border-tmf-gray-1","px-3","py-1.5","text-sm","hover:bg-gray-100",3,"click"],[1,"material-symbols-outlined","text-[20px]","md:text-[22px]"],[1,"container","mx-auto","py-8"],[1,"mb-8"],[1,"mb-4","flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"text-xl","font-bold"],[1,"text-gray-600"],[1,"overflow-x-auto"],[1,"w-full","border-collapse"],[1,"border-b","border-gray-200","bg-gray-50"],[1,"p-3","text-left"],[1,"border-b","border-gray-200"],[1,"p-3"],["colspan","7",1,"p-3","text-center"],["colspan","6",1,"p-3","text-right","font-bold"],[1,"p-3","font-bold"]],template:function(d,u){d&1&&(e(0,"div",0)(1,"h1",1),i(2,"\u4EA4\u6613\u7D00\u9304"),t(),e(3,"div",2)(4,"p",3),i(5,"\u586B\u5BEB\u5DF2\u5B8C\u6210"),t(),e(6,"button",4),S("click",function(){return u.openAccountDialog()}),e(7,"div",2)(8,"span"),i(9,"\u586B\u5BEB\u532F\u6B3E\u5E33\u865F"),t(),e(10,"span",5),i(11," edit_square "),t()()()()(),e(12,"div",6)(13,"div",7)(14,"div",8)(15,"div",9)(16,"h2",10),i(17,"\u672C\u6708\u5DF2\u5B8C\u6210\u8AB2\u7A0B"),t(),e(18,"span",11),i(19,"\u6BCF\u6708\u6700\u5F8C\u4E00\u65E5\u7D50\u7B97"),t()(),e(20,"button",4),S("click",function(){return u.downloadHistory()}),i(21," \u4E0B\u8F09\u6B77\u53F2\u7D00\u9304 "),t()(),e(22,"div",12)(23,"table",13)(24,"thead")(25,"tr",14)(26,"th",15),i(27,"\u8AB2\u7A0B"),t(),e(28,"th",15),i(29,"\u5B78\u751F"),t(),e(30,"th",15),i(31,"\u4E0A\u8AB2\u5802\u6B21"),t(),e(32,"th",15),i(33,"\u65E5\u671F"),t(),e(34,"th",15),i(35,"\u6642\u9593"),t(),e(36,"th",15),i(37,"\u5B78\u751F\u806F\u7D61\u8CC7\u6599"),t(),e(38,"th",15),i(39,"\u6536\u5165"),t()()(),e(40,"tbody"),v(41,k,16,11,"tr",16,R,!1,w,3,0,"tr"),t(),e(44,"tfoot"),x(45,M,5,1,"tr"),t()()()(),e(46,"div")(47,"div",8)(48,"div",9)(49,"h2",10),i(50,"\u5F85\u5B8C\u6210\u8AB2\u7A0B"),t()()(),e(51,"div",12)(52,"table",13)(53,"thead")(54,"tr",14)(55,"th",15),i(56,"\u8AB2\u7A0B"),t(),e(57,"th",15),i(58,"\u5B78\u751F"),t(),e(59,"th",15),i(60,"\u4E0A\u8AB2\u5802\u6B21"),t(),e(61,"th",15),i(62,"\u65E5\u671F"),t(),e(63,"th",15),i(64,"\u6642\u9593"),t(),e(65,"th",15),i(66,"\u5B78\u751F\u806F\u7D61\u8CC7\u6599"),t(),e(67,"th",15),i(68,"\u9810\u8A08\u6536\u5165"),t()()(),e(69,"tbody"),v(70,$,16,11,"tr",16,R,!1,j,3,0,"tr"),t(),e(73,"tfoot"),x(74,G,5,1,"tr"),t()()()()()),d&2&&(r(41),_(u.completed_reserves()),r(4),E(45,u.completed_reserves()&&u.completed_reserves().length>0?45:-1),r(25),_(u.uncompleted_reserves()),r(4),E(74,u.uncompleted_reserves()&&u.uncompleted_reserves().length>0?74:-1))},dependencies:[y,F]});let a=l;return a})();export{Q as default};
