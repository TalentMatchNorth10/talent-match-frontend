<div class="pb-8">
  <div class="mb-4 flex items-center justify-between">
    <h2 class="text-2xl font-bold">已預約時段</h2>
    @if (fg.controls.viewMode.value === 'table') {
      <div class="flex items-center gap-4" [formGroup]="fg">
        <tmf-select formControlName="course" class="!w-[250px]">
          <tmf-option [label]="'全部'" [value]="'all'"> </tmf-option>
          @for (course of courseList; track course._id) {
            <tmf-option [label]="course.name!" [value]="course._id">
            </tmf-option>
          }
        </tmf-select>
        <tmf-select formControlName="student" class="!w-[200px]">
          <tmf-option [label]="'全部'" [value]="'all'"> </tmf-option>
          @for (student of filterStudentList(); track student._id) {
            <tmf-option [label]="student.nick_name!" [value]="student._id">
            </tmf-option>
          }
        </tmf-select>
        <button
          class="box-border rounded-md border border-tmf-gray-2 bg-white px-4 py-[7px] text-center text-tmf-gray-2"
          (click)="fetchReserveTable()"
        >
          查詢
        </button>
      </div>
    }
    <div class="flex items-center gap-2" [formGroup]="fg">
      <label class="custom-radio">
        <input
          type="radio"
          name="viewMode"
          formControlName="viewMode"
          value="table"
          class="hidden"
          checked
        />
        列表
      </label>
      <label class="custom-radio">
        <input
          type="radio"
          name="viewMode"
          formControlName="viewMode"
          value="calendar"
          class="hidden"
        />
        日曆
      </label>
    </div>
  </div>
  @switch (fg.controls.viewMode.value) {
    @case ('table') {
      <tmf-reserve-table
        [isLoading]="isLoading()"
        [totalCount]="tableCount()"
        [tableReserves]="tableReserves()"
        (changePageEvent)="changeTablePage($event)"
      ></tmf-reserve-table>
    }
    @case ('calendar') {
      <full-calendar [options]="calendarOptions"></full-calendar>
    }
  }
</div>
